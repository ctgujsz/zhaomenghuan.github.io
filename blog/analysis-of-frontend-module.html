<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浅析前端模块化 | 匠心博客</title>
    <meta name="description" content="小青年,匠心,小青年博客,匠心博客,前端开发,android,技术宅,菜鸟教程,一个神奇的博客。">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.e4576dbc.css" as="style"><link rel="preload" href="/assets/js/app.4d6b7a5c.js" as="script"><link rel="preload" href="/assets/js/49.f5be74e3.js" as="script"><link rel="preload" href="/assets/js/18.b4f6139e.js" as="script"><link rel="preload" href="/assets/js/34.3f96b3d4.js" as="script"><link rel="prefetch" href="/assets/js/1.0e122235.js"><link rel="prefetch" href="/assets/js/10.7978ef40.js"><link rel="prefetch" href="/assets/js/100.3306cb58.js"><link rel="prefetch" href="/assets/js/101.82e15085.js"><link rel="prefetch" href="/assets/js/102.3bc6af75.js"><link rel="prefetch" href="/assets/js/103.67ffc75d.js"><link rel="prefetch" href="/assets/js/104.6d918ede.js"><link rel="prefetch" href="/assets/js/11.849c9a26.js"><link rel="prefetch" href="/assets/js/12.46850ae9.js"><link rel="prefetch" href="/assets/js/13.007a7c72.js"><link rel="prefetch" href="/assets/js/14.84729b84.js"><link rel="prefetch" href="/assets/js/15.5463a28a.js"><link rel="prefetch" href="/assets/js/16.47267e79.js"><link rel="prefetch" href="/assets/js/17.e275f38c.js"><link rel="prefetch" href="/assets/js/19.8c8cc1a2.js"><link rel="prefetch" href="/assets/js/2.46ce0f09.js"><link rel="prefetch" href="/assets/js/20.cb24504f.js"><link rel="prefetch" href="/assets/js/21.e579f748.js"><link rel="prefetch" href="/assets/js/22.72474b7d.js"><link rel="prefetch" href="/assets/js/23.72645e4f.js"><link rel="prefetch" href="/assets/js/24.964de388.js"><link rel="prefetch" href="/assets/js/25.93ac939a.js"><link rel="prefetch" href="/assets/js/26.35c43452.js"><link rel="prefetch" href="/assets/js/27.cbcd0bd4.js"><link rel="prefetch" href="/assets/js/28.445f49db.js"><link rel="prefetch" href="/assets/js/29.a3a8225a.js"><link rel="prefetch" href="/assets/js/30.6da0bf7b.js"><link rel="prefetch" href="/assets/js/31.1ad214cb.js"><link rel="prefetch" href="/assets/js/32.92bd43bc.js"><link rel="prefetch" href="/assets/js/33.e16167fc.js"><link rel="prefetch" href="/assets/js/35.94efffa2.js"><link rel="prefetch" href="/assets/js/36.bafbcf3f.js"><link rel="prefetch" href="/assets/js/37.6f25acbb.js"><link rel="prefetch" href="/assets/js/38.bbc4eb7a.js"><link rel="prefetch" href="/assets/js/39.0dc556c8.js"><link rel="prefetch" href="/assets/js/4.7af11f8f.js"><link rel="prefetch" href="/assets/js/40.36154957.js"><link rel="prefetch" href="/assets/js/41.311bcd28.js"><link rel="prefetch" href="/assets/js/42.d1cfa14d.js"><link rel="prefetch" href="/assets/js/43.65e296ec.js"><link rel="prefetch" href="/assets/js/44.e2b88a63.js"><link rel="prefetch" href="/assets/js/45.8cf6c50d.js"><link rel="prefetch" href="/assets/js/46.05c69c1d.js"><link rel="prefetch" href="/assets/js/47.1dc564ca.js"><link rel="prefetch" href="/assets/js/48.02fdca43.js"><link rel="prefetch" href="/assets/js/5.f00d01c6.js"><link rel="prefetch" href="/assets/js/50.379bb6a8.js"><link rel="prefetch" href="/assets/js/51.83daf696.js"><link rel="prefetch" href="/assets/js/52.fcd14ded.js"><link rel="prefetch" href="/assets/js/53.a06ae42a.js"><link rel="prefetch" href="/assets/js/54.089e376e.js"><link rel="prefetch" href="/assets/js/55.84b39d19.js"><link rel="prefetch" href="/assets/js/56.956b5f5d.js"><link rel="prefetch" href="/assets/js/57.4009aacc.js"><link rel="prefetch" href="/assets/js/58.1e436b7f.js"><link rel="prefetch" href="/assets/js/59.1596f0ea.js"><link rel="prefetch" href="/assets/js/6.dadfa526.js"><link rel="prefetch" href="/assets/js/60.11f3a489.js"><link rel="prefetch" href="/assets/js/61.942b5897.js"><link rel="prefetch" href="/assets/js/62.c6a5c000.js"><link rel="prefetch" href="/assets/js/63.d923245f.js"><link rel="prefetch" href="/assets/js/64.ea91019c.js"><link rel="prefetch" href="/assets/js/65.0c314a77.js"><link rel="prefetch" href="/assets/js/66.9f782fbd.js"><link rel="prefetch" href="/assets/js/67.71e75249.js"><link rel="prefetch" href="/assets/js/68.10ff30c8.js"><link rel="prefetch" href="/assets/js/69.bb7204de.js"><link rel="prefetch" href="/assets/js/7.2ded2d0c.js"><link rel="prefetch" href="/assets/js/70.ec1be748.js"><link rel="prefetch" href="/assets/js/71.c4259ee6.js"><link rel="prefetch" href="/assets/js/72.5d1d999e.js"><link rel="prefetch" href="/assets/js/73.ed92364e.js"><link rel="prefetch" href="/assets/js/74.e8daae2f.js"><link rel="prefetch" href="/assets/js/75.4541493e.js"><link rel="prefetch" href="/assets/js/76.2e4b3177.js"><link rel="prefetch" href="/assets/js/77.f8400e8a.js"><link rel="prefetch" href="/assets/js/78.e30d04e6.js"><link rel="prefetch" href="/assets/js/79.4c48f007.js"><link rel="prefetch" href="/assets/js/8.86b21130.js"><link rel="prefetch" href="/assets/js/80.19d3f54f.js"><link rel="prefetch" href="/assets/js/81.fb9f69e5.js"><link rel="prefetch" href="/assets/js/82.f443954c.js"><link rel="prefetch" href="/assets/js/83.9895f5f9.js"><link rel="prefetch" href="/assets/js/84.bf8da186.js"><link rel="prefetch" href="/assets/js/85.e0b784de.js"><link rel="prefetch" href="/assets/js/86.4d095ed9.js"><link rel="prefetch" href="/assets/js/87.34b19b4d.js"><link rel="prefetch" href="/assets/js/88.82051535.js"><link rel="prefetch" href="/assets/js/89.935520ef.js"><link rel="prefetch" href="/assets/js/9.4f724aba.js"><link rel="prefetch" href="/assets/js/90.d75c1876.js"><link rel="prefetch" href="/assets/js/91.1bab6961.js"><link rel="prefetch" href="/assets/js/92.2e4bd9a2.js"><link rel="prefetch" href="/assets/js/93.3aed17d2.js"><link rel="prefetch" href="/assets/js/94.f1312ba3.js"><link rel="prefetch" href="/assets/js/95.e1ddf5b9.js"><link rel="prefetch" href="/assets/js/96.d4567d03.js"><link rel="prefetch" href="/assets/js/97.4ff13e92.js"><link rel="prefetch" href="/assets/js/98.fb5affc0.js"><link rel="prefetch" href="/assets/js/99.d6814599.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4576dbc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">匠心博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/index.html" class="nav-link">博文</a></div><div class="nav-item"><a href="/book/index.html" class="nav-link">专栏</a></div><div class="nav-item"><a href="/note/index.html" class="nav-link">笔记</a></div><div class="nav-item"><a href="/nav/index.html" class="nav-link">导航</a></div><div class="nav-item"><a href="/about/index.html" class="nav-link">关于</a></div> <a href="https://github.com/zhaomenghuan" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>浅析前端模块化</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog/analysis-of-frontend-module.html#写在前面" class="sidebar-link">写在前面</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/analysis-of-frontend-module.html#前端组件化和模块化的区别" class="sidebar-link">前端组件化和模块化的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/analysis-of-frontend-module.html#webpack-是什么鬼？" class="sidebar-link">webpack 是什么鬼？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/analysis-of-frontend-module.html#webpack-入门" class="sidebar-link">webpack 入门</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="浅析前端模块化">浅析前端模块化</h1> <h2 id="写在前面">写在前面</h2> <p>近来学习了 git，github，确实体验了一下开发效率这个问题，比如几条常用命令就可以把代码下载上传到 github 上，可以很快的去测试一下效果。去年就听说过前端模块化这个概念，但是一直没有深入去了解，所以准备继续学习一下相关的技术。虽然现在前端各种口水战，说什么前端目前浮躁，其实个人觉得不然，是因为人容易站在自己的立场去看问题，不管什么框架终究要适用于业务需求需要，各自有自己的适用环境，无从说哪种更好，自己觉得合适就好。</p> <h2 id="前端组件化和模块化的区别">前端组件化和模块化的区别</h2> <p>由于我之前学过 java 和 android app 开发，也略知 java 这种语言的包管理，一方面可以解决命名冲突，一方面可以实现代码模块的复用，在开发过程中还是有一定好处的，代码结构和层次很清晰，容易管理。不过话又说回来，包名臭长臭长的好难记啊，基本写代码靠 copy。<strong>/(ㄒ o ㄒ)/~~</strong></p> <p>曾经尝试直接撸个小 UI 库<strong>eui</strong>(写出来用了一段时间 bug 太多，停了。。。），尝试了用 jQuery 风格的匿名自执行函数去包装库。期间也看了看很多 js 设计模式的帖子，看了看很多框架的实现方法。后来了解到 vue，react，angular 这种 mvvm 框架，说什么鬼的模块化，最后选择试试了 vue，用 vue 也写了一下，发现确实是挺优雅的一个框架，真的是感觉有可取之处，值得去学习。开始我都是把所有的组件写在一个<strong>xxx.js</strong>和<strong>xxx.css</strong>里面，但是内容多了，感觉有点烦，看官网上提到的<code>.vue</code>单文件，感觉确实是合理一些。那好吧，那就硬着头皮去入坑模块化，这里贴出知乎上的一篇帖子，仅供参考，后面等我有了自己的体会自己写一篇。</p> <p>模块化中的模块一般指的是 Javascript 模块，比如一个用来格式化时间的模块。组件则包含了 template、style 和 script，而它的 Script 可以由各种模块组成。比如一个显示时间的组件会调用上面的那个格式化时间的模块。
<img src="http://i.imgur.com/QiPUhoa.png" alt></p> <p>在这里直接引用一篇黄玄写的**<a href="http://huangxuan.me/js-module-7day/#/" target="_blank" rel="noopener noreferrer">JavaScript 模块化七日谈<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>**<sup>[2]</sup>。</p> <ul><li>第一日 上古时期 Module? 从设计模式说起</li> <li>第二日 石器时代 Script Loader 只有封装性可不够，我们还需要加载</li> <li>第三日 蒸汽朋克 Module Loader 模块化架构的工业革命</li> <li>第四日 号角吹响 CommonJS 征服世界的第一步是跳出浏览器</li> <li>第五日 双塔奇兵 AMD/CMD 浏览器环境模块化方案</li> <li>第六日 精灵宝钻 Browserify/Webpack 大势所趋，去掉这层包裹！</li> <li>第七日 王者归来 ES6 Module 最后的战役</li></ul> <h2 id="webpack-是什么鬼？">webpack 是什么鬼？</h2> <p>看完大多数介绍前端模块化的文章你基本都会听到 AMD，CommonJS，RequireJS 等一些列很专业的名词，但是很多时候搞不清他们之间的关系，这里我们先简单分类：</p> <ul><li><p>Javascript 模块化标准：CommonJS，AMD，CMD，ES6 Modules
这里简单说说就是定义一般的语法规范，注意与工具的区别。</p></li> <li><p>最常见的模块加载器：</p></li></ul> <ul><li>browserify/webpack，基于 CommonJS 标准</li> <li>RequireJS，基于 AMD 标准</li> <li>SeaJS，基于 CMD 标准</li></ul> <p>这里不详细去讲解每一种的特点以及他们之间的差异，这里我们我们会使用 webpack，所以下面只会详细介绍 CommonJS 标准和 webpack 的基本用法。</p> <blockquote><p>Webpack 是德国开发者 Tobias Koppers 开发的模块加载器,Instagram 工程师认为这个方案很棒, 似乎还把作者招过去了。在 Webpack 当中, 所有的资源都被当作是模块, js, css, 图片等等..因此, Webpack 当中 js 可以引用 css, css 中可以嵌入图片 dataUrl。</p></blockquote> <p>对应各种不同文件类型的资源, Webpack 有对应的模块 loader。比如 vue.js 用的是 vue-loader, 其他还有很多: http://webpack.github.io/docs/list-of-loaders.html</p> <p>官网对 webpack 的定义是 MODULE BUNDLER，他的目的就是把有依赖关系的各种文件打包成一系列的静态资源。 请看下图：</p> <p><img src="http://i.imgur.com/psArjvs.png" alt></p> <h2 id="webpack-入门">webpack 入门</h2> <p>webpack 基于 node 的模块加载器，所以这里你要安装 node.js 的运行环境。（不过这里要特别说明的是经过 webpack 打包的前端静态代码是不用依赖与 node.js 环境的，直接放在服务器上可以打开，因为一开始这个我被有些人误导了一直没搞清楚）。使用 webpack 开发的时候不可避免的要使用一些模块包，所以这里要使用 npm（Node Packaged Modules）。</p> <blockquote><p>npm 是 nodejs 官方为 nodejs 定制的一个工具，是 Node.js 的包管理器，是 Node Packaged Modules 的简称，通过 npm 可以下载安装 nodejs 的模块包，nodejs 有很多优秀的模块包可以让开发这快速开发。</p></blockquote> <p><strong>安装方法：</strong></p> <ul><li><a href="http://jingyan.baidu.com/article/b0b63dbfca599a4a483070a5.html" target="_blank" rel="noopener noreferrer">windows 下安装 nodejs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://jingyan.baidu.com/article/a17d528506d7f58098c8f2b0.html" target="_blank" rel="noopener noreferrer">npm 安装图文教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://jingyan.baidu.com/article/90895e0fb3495f64ed6b0b50.html" target="_blank" rel="noopener noreferrer">如何在 windows 下安装 GIT<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>(建议安装 git，当然这个随你)</li></ul> <p>安装好了之后，在命令行输入下面的命令查看当前安装版本。</p> <div class="language- extra-class"><pre class="language-text"><code>node -v
npm -v
</code></pre></div><p>我安装的版本是<code>node : v5.10.1 , npm : 3.8.3</code>，若是版本问题，请更新到最新版。首先我们直接进行全局的安装，运行如下命令：<code>npm install webpack -g</code>，可能需要一点时间。安装成功后，在命令行输入<code>webpack -h</code>即可查看当前安装的版本信息。以及可以使用的指令。</p> <p><strong>hello world：</strong>
新建项目文件夹，然后命令行进入项目目录</p> <div class="language-js extra-class"><pre class="language-js"><code># 创建<span class="token keyword">package</span><span class="token punctuation">.</span>json，直接一路回车就好
npm init

# 安装 webpack 依赖
npm install webpack <span class="token operator">--</span>save<span class="token operator">-</span>dev

# 简单的写法：<span class="token operator">-</span>_<span class="token operator">-</span><span class="token punctuation">,</span>缩写形式
npm i webpack <span class="token operator">-</span><span class="token constant">D</span>
# –save：模块名将被添加到dependencies，可以简化为参数<span class="token operator">-</span><span class="token constant">S</span>。
# –save<span class="token operator">-</span>dev<span class="token punctuation">:</span> 模块名将被添加到devDependencies，可以简化为参数<span class="token operator">-</span><span class="token constant">D</span>。
</code></pre></div><p>经过上面的几步后你会发现项目目录下生成了一个 package.json 文件和 node_modules 文件夹。</p> <p>**package.json: **</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.12.15&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>既然环境都已经安装好了，那么我们就开始来用 webpack 进行我们的第一个打包运行程序吧！</p> <p>首先创建一个静态页面 index.html 和一个 JS 入口文件 entry.js,（这里你想用什么名字都可以，只需要在打包的时候读取文件为该名字就好，不过，到时候就知道这个名字的含义啦！）：</p> <p>**index.html: **</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- 注意这里引入的不是我们创建的文件，而是用webpack生成的文件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>**entry.js: **</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>文件都已经创建成功了，那么就开始我们的打包吧！在命令行输入命令：</p> <div class="language-js extra-class"><pre class="language-js"><code>webpack entry<span class="token punctuation">.</span>js bundle<span class="token punctuation">.</span>js
</code></pre></div><p>运行成功会出现：</p> <div class="language-js extra-class"><pre class="language-js"><code>Hash<span class="token punctuation">:</span> <span class="token number">29</span>cef45390255691137e
Version<span class="token punctuation">:</span> webpack <span class="token number">1.12</span><span class="token number">.15</span>
Time<span class="token punctuation">:</span> <span class="token number">218</span>ms
    Asset     Size  Chunks             Chunk Names
bundle<span class="token punctuation">.</span>js  <span class="token number">1.45</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">/</span>entry<span class="token punctuation">.</span>js <span class="token number">57</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre></div><p>目录下会生成一个 bundle.js 文件，在浏览器中打开 index.html，就能看到我们设置的文字啦！：<strong>hello world</strong></p> <p>这么简单的功能直接在 html 中引入不就好了吗？确实是这样的，不过我们这才刚刚开始嘛，不要急。</p> <p>这里我们新建一个 sub.js 文件作为一个新的模块。
**sub.js: **</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//我们这里使用CommonJS的风格</span>
<span class="token keyword">function</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello China&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> getText<span class="token punctuation">;</span>
</code></pre></div><p>修改 entry.js 文件如下：
**entry.js: **</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//引用sub模块</span>
<span class="token keyword">var</span> sub <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./sub&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>再来进行一次重复的工作，再打包一次。<code>webpack entry.js bundle.js</code>，如果成功，打包过程会显示日志：</p> <div class="language-js extra-class"><pre class="language-js"><code>Hash<span class="token punctuation">:</span> af3c33f78683d1f00e10
Version<span class="token punctuation">:</span> webpack <span class="token number">1.12</span><span class="token number">.15</span>
Time<span class="token punctuation">:</span> <span class="token number">178</span>ms
    Asset    Size  Chunks             Chunk Names
bundle<span class="token punctuation">.</span>js  <span class="token number">1.8</span> kB       <span class="token number">0</span>  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">/</span>entry<span class="token punctuation">.</span>js <span class="token number">138</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
   <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token operator">/</span>sub<span class="token punctuation">.</span>js <span class="token number">178</span> bytes <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre></div><blockquote><p>Webpack 会分析入口文件，解析包含依赖关系的各个文件。这些文件（模块）都打包到 bundle.js 。Webpack 会给每个模块分配一个唯一的 id 并通过这个 id 索引和访问模块。在页面启动时，会先执行 entry.js 中的代码，其它模块会在运行 require 的时候再执行。</p></blockquote> <p>我们每次都需要输入入口文件 entry.js 和输出文件 bundle.js，是不是很麻烦？这里我们简单设置一下 webpack.config.js:</p> <ul><li>entry 入口文件 让 webpack 用哪个文件作为项目的入口</li> <li>output 出口 让 webpack 把处理完成的文件放在哪里</li> <li>module 模块 要用什么不同的模块来处理各种类型的文件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> Webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./entry.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后在项目根目录运行<code>webpack</code>，如果你的配置没有问题的话，可以在命令行中看到正确的输出，因为这个命令会自动在当前目录中查找 webpack.config.js 的配置文件，并按照里面定义的规则来进行执行。</p> <p>这个 hello world 介绍了 webpack 的最简单的内容，还没有涉及到添加 CSS 样式，添加图片，由于本文作为前端模块化系列文章第一篇，先不做过多介绍，后面会补充更多内容。</p> <p>参考文档：（商业转载请联系作者获得授权，非商业转载请注明出处。）</p> <ul><li>[1] Jasin Yip http://www.zhihu.com/question/37649318 来源知乎</li> <li>[2] 黄玄 http://www.zhihu.com/question/37011441/answer/71639106 来源知乎</li> <li>[3] Webpack 傻瓜式指南 https://github.com/vikingmute/webpack-for-fools/blob/master/entries/chapter-1.md</li></ul> <div data-v-3bd334e8><p class="descript" data-v-3bd334e8>写这些代码也许就一两个小时的事，写一篇大家好接受的文章需要几天的酝酿，如果文章对您有帮助请我喝杯咖啡吧！</p> <img src="/supportme.png" class="pay-code" data-v-3bd334e8> <div data-v-3bd334e8><div id="container"></div></div> <div class="footer" data-v-c6ca53a6 data-v-3bd334e8><p data-v-c6ca53a6>站点总访问量： 站点总访客数：</p> <p data-v-c6ca53a6>博客内容遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" data-v-c6ca53a6>知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></p> <p data-v-c6ca53a6>赵梦欢 © 2015 - 2020</p></div></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.4d6b7a5c.js" defer></script><script src="/assets/js/49.f5be74e3.js" defer></script><script src="/assets/js/18.b4f6139e.js" defer></script><script src="/assets/js/34.3f96b3d4.js" defer></script>
  </body>
</html>
